"use strict";(self["webpackChunkvue3_test"]=self["webpackChunkvue3_test"]||[]).push([[111],{2111:function(t,o,e){e.r(o),e.d(o,{default:function(){return Ct}});var n=e(6252),a=e(9963);const l={id:"main"},u={id:"switchover"};function i(t,o,e,i,d,p){const k=(0,n.up)("upBook"),r=(0,n.up)("upChapter"),s=(0,n.up)("amend");return(0,n.wg)(),(0,n.iD)("div",l,[(0,n.wy)((0,n.Wm)(k,null,null,512),[[a.F8,1==i.switchover]]),(0,n.wy)((0,n.Wm)(r,null,null,512),[[a.F8,2==i.switchover]]),(0,n.wy)((0,n.Wm)(s,null,null,512),[[a.F8,3==i.switchover]]),(0,n._)("div",u,[(0,n._)("button",{onClick:o[0]||(o[0]=t=>i.switchover=1)},"上传书籍"),(0,n._)("button",{onClick:o[1]||(o[1]=t=>i.switchover=2)},"上传新章"),(0,n._)("button",{onClick:o[2]||(o[2]=t=>i.switchover=3)},"修改书籍")])])}var d=e(2262);const p=t=>((0,n.dD)("data-v-2ac403ec"),t=t(),(0,n.Cn)(),t),k={id:"upBook"},r=p((()=>(0,n._)("h1",null,"上传书籍",-1))),s=(0,n.Uk)(" 小说名:"),c=p((()=>(0,n._)("br",null,null,-1))),m={key:0,id:"examineBook"},h=(0,n.Uk)(" 作者名:"),v=p((()=>(0,n._)("br",null,null,-1))),y=(0,n.Uk)(" 书籍类型:"),w=(0,n.uE)('<option value="历史" data-v-2ac403ec>历史</option><option value="军事" data-v-2ac403ec>军事</option><option value="科幻" data-v-2ac403ec>科幻</option><option value="武侠" data-v-2ac403ec>武侠</option><option value="仙侠" data-v-2ac403ec>仙侠</option><option value="奇幻" data-v-2ac403ec>奇幻</option><option value="灵异" data-v-2ac403ec>灵异</option>',7),B=[w],b=p((()=>(0,n._)("br",null,null,-1))),C=(0,n.Uk)(" 书籍短简介:"),_=p((()=>(0,n._)("br",null,null,-1))),g=p((()=>(0,n._)("br",null,null,-1))),f=(0,n.Uk)(" 书籍简介:"),x=p((()=>(0,n._)("br",null,null,-1))),N=p((()=>(0,n._)("br",null,null,-1)));function D(t,o,e,l,u,i){return(0,n.wg)(),(0,n.iD)("div",k,[r,s,(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=o=>t.Name=o),onBlur:o[1]||(o[1]=o=>t.blur())},null,544),[[a.nr,t.Name]]),c,t.examineBook?((0,n.wg)(),(0,n.iD)("p",m,"该书名已经被使用")):(0,n.kq)("",!0),h,(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":o[2]||(o[2]=o=>t.Author=o)},null,512),[[a.nr,t.Author]]),v,y,(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":o[3]||(o[3]=o=>t.Class=o)},B,512),[[a.bM,t.Class]]),b,C,(0,n.wy)((0,n._)("input",{style:{width:"300px"},type:"text","onUpdate:modelValue":o[4]||(o[4]=o=>t.MiNiJianJie=o)},null,512),[[a.nr,t.MiNiJianJie]]),_,g,f,x,(0,n.wy)((0,n._)("textarea",{id:"longJian","onUpdate:modelValue":o[5]||(o[5]=o=>t.JianJie=o)},null,512),[[a.nr,t.JianJie]]),N,(0,n._)("input",{type:"file",onChange:o[6]||(o[6]=(0,a.iM)(((...o)=>t.show&&t.show(...o)),["prevent","stop"]))},null,32),(0,n._)("button",{onClick:o[7]||(o[7]=o=>t.uploading())},"上传")])}var I=e(9669),J=e.n(I),U={name:"upBook",setup(){let t=(0,d.qj)({Name:"",Author:"",MiNiJianJie:"",JianJie:"",Class:"历史",bookData:"",user:localStorage.getItem("userName"),examineBook:!1,show(o){let e=o.target.files[0];var n=new FileReader;n.readAsText(e),n.onload=function(){t.bookData=n.result}},blur(){J()({method:"post",url:"http://127.0.0.1:5055/examineBook",data:{Name:this.Name}}).then((t=>{t.data?this.examineBook=!1:this.examineBook=!0}))},uploading(){if(this.examineBook)return alert("该书名已经被使用");J()({method:"post",url:"http://127.0.0.1:5055/uploading",data:{data:t}}).then((t=>{alert("上传完毕~")}))}});return{...(0,d.BK)(t)}}},V=e(3744);const M=(0,V.Z)(U,[["render",D],["__scopeId","data-v-2ac403ec"]]);var A=M,T=e(3577);const z=t=>((0,n.dD)("data-v-68d25164"),t=t(),(0,n.Cn)(),t),q={key:0,id:"upChapter"},K=z((()=>(0,n._)("h1",null,"上传章节",-1))),F=(0,n.Uk)(" 选择小说:"),Z=["onClick"],j=z((()=>(0,n._)("br",null,null,-1))),H=(0,n.Uk)(" 章节名:"),S=z((()=>(0,n._)("br",null,null,-1))),W=z((()=>(0,n._)("br",null,null,-1))),E=z((()=>(0,n._)("p",null,"章节内容",-1))),Y=z((()=>(0,n._)("br",null,null,-1))),R=z((()=>(0,n._)("br",null,null,-1)));function G(t,o,e,l,u,i){return t.on?((0,n.wg)(),(0,n.iD)("div",q,[K,F,(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":o[0]||(o[0]=o=>t.bookName=o)},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.myBooks,(o=>((0,n.wg)(),(0,n.iD)("option",{key:"book",onClick:e=>t.getBookId(o.Id)},(0,T.zw)(o.Name),9,Z)))),128))],512),[[a.bM,t.bookName]]),j,H,(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":o[1]||(o[1]=o=>t.Chapter=o)},null,512),[[a.nr,t.Chapter]]),S,W,E,(0,n.wy)((0,n._)("textarea",{id:"longJian","onUpdate:modelValue":o[2]||(o[2]=o=>t.bookText=o)},null,512),[[a.nr,t.bookText]]),Y,R,(0,n._)("button",{onClick:o[3]||(o[3]=o=>t.upChapter())},"上传该章节")])):(0,n.kq)("",!0)}var L={name:"upChapter",setup(){let t=(0,n.f3)("reload");J()({method:"post",url:"http://127.0.0.1:5055/getMyBook",data:{user:localStorage.getItem("userName")}}).then((t=>{o.myBooks=t.data,o.on=!0,J()({method:"post",url:"http://127.0.0.1:5055/getbooks",data:{myBooks:o.myBooks}}).then((t=>{if("null"==t.data[0].Name||void 0==t.data)return o.bookName=t.data[0].Name,o.myBooks=t.data;o.myBooks=t.data,o.bookName=o.myBooks[0].Name,o.BookId=o.myBooks[0].Id}))}));let o=(0,d.qj)({myBooks:[],bookName:"",on:!1,Chapter:"",bookText:"",BookId:"",getBookId(t){this.BookId=t},upChapter(){return""==this.bookText||""==this.Chapter?alert("内容或章节名不能为空"):-1!=this.Chapter.search(/^\d/)?alert("章节名开头不能使用 数字"):"null"==this.bookName?alert("不能给不存在的书添加新章节"):void J()({method:"post",url:"http://127.0.0.1:5055/upChapter",data:{Id:this.BookId,Chapter:this.Chapter,bookText:this.bookText}}).then((o=>{alert(o.data),t()}))}});return{...(0,d.BK)(o)}}};const O=(0,V.Z)(L,[["render",G],["__scopeId","data-v-68d25164"]]);var P=O;const Q=t=>((0,n.dD)("data-v-4fdfa27f"),t=t(),(0,n.Cn)(),t),X={key:0},$=Q((()=>(0,n._)("h1",null,"修改书籍",-1))),tt=(0,n.Uk)(" 选择小说:"),ot=["onClick"],et=(0,n.Uk)("书籍名: "),nt=["textContent"],at=(0,n.Uk)("作者: "),lt=["textContent"],ut=(0,n.Uk)(" 分类: "),it=(0,n.uE)('<option value="历史" data-v-4fdfa27f>历史</option><option value="军事" data-v-4fdfa27f>军事</option><option value="科幻" data-v-4fdfa27f>科幻</option><option value="武侠" data-v-4fdfa27f>武侠</option><option value="仙侠" data-v-4fdfa27f>仙侠</option><option value="奇幻" data-v-4fdfa27f>奇幻</option><option value="灵异" data-v-4fdfa27f>灵异</option>',7),dt=[it],pt=(0,n.Uk)(" 短简介: "),kt=["textContent"],rt=(0,n.Uk)(" 长简介: "),st=["textContent"],ct=Q((()=>(0,n._)("br",null,null,-1))),mt={key:1};function ht(t,o,e,l,u,i){return t.on?((0,n.wg)(),(0,n.iD)("div",X,[$,tt,(0,n._)("select",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.myBooks,(o=>((0,n.wg)(),(0,n.iD)("option",{key:"book",onClick:e=>t.amend(o)},(0,T.zw)(o.Name),9,ot)))),128))]),(0,n._)("div",null,[(0,n._)("div",null,[et,t.cutInupt[0]?((0,n.wg)(),(0,n.iD)("span",{key:0,textContent:(0,T.zw)(t.Book.Name)},null,8,nt)):(0,n.wy)(((0,n.wg)(),(0,n.iD)("input",{key:1,type:"text","onUpdate:modelValue":o[0]||(o[0]=o=>t.Book.Name=o)},null,512)),[[a.nr,t.Book.Name]]),t.cutInupt[0]?((0,n.wg)(),(0,n.iD)("button",{key:2,onClick:o[1]||(o[1]=o=>t.cut(0))},"修改")):((0,n.wg)(),(0,n.iD)("button",{key:3,onClick:o[2]||(o[2]=o=>t.cut(0))},"确认"))]),(0,n._)("div",null,[at,t.cutInupt[1]?((0,n.wg)(),(0,n.iD)("span",{key:0,textContent:(0,T.zw)(t.Book.Author)},null,8,lt)):(0,n.wy)(((0,n.wg)(),(0,n.iD)("input",{key:1,type:"text","onUpdate:modelValue":o[3]||(o[3]=o=>t.Book.Author=o)},null,512)),[[a.nr,t.Book.Author]]),t.cutInupt[1]?((0,n.wg)(),(0,n.iD)("button",{key:2,onClick:o[4]||(o[4]=o=>t.cut(1))},"修改")):((0,n.wg)(),(0,n.iD)("button",{key:3,onClick:o[5]||(o[5]=o=>t.cut(1))},"确认"))]),(0,n._)("div",null,[ut,(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":o[6]||(o[6]=o=>t.Book.Class=o)},dt,512),[[a.bM,t.Book.Class]])]),(0,n._)("div",null,[pt,t.cutInupt[2]?((0,n.wg)(),(0,n.iD)("span",{key:0,textContent:(0,T.zw)(t.Book.MiNiJianJie)},null,8,kt)):(0,n.wy)(((0,n.wg)(),(0,n.iD)("input",{key:1,type:"text",style:{width:"300px"},"onUpdate:modelValue":o[7]||(o[7]=o=>t.Book.MiNiJianJie=o)},null,512)),[[a.nr,t.Book.MiNiJianJie]]),t.cutInupt[2]?((0,n.wg)(),(0,n.iD)("button",{key:2,onClick:o[8]||(o[8]=o=>t.cut(2))},"修改")):((0,n.wg)(),(0,n.iD)("button",{key:3,onClick:o[9]||(o[9]=o=>t.cut(2))},"确认"))]),(0,n._)("div",null,[rt,t.cutInupt[3]?((0,n.wg)(),(0,n.iD)("p",{key:0,id:"JianJie",textContent:(0,T.zw)(t.Book.JianJie)},null,8,st)):(0,n.wy)(((0,n.wg)(),(0,n.iD)("textarea",{key:1,style:{width:"95%",height:"100px",margin:"5px",padding:"5px"},"onUpdate:modelValue":o[10]||(o[10]=o=>t.Book.JianJie=o)},null,512)),[[a.nr,t.Book.JianJie]]),ct,t.cutInupt[3]?((0,n.wg)(),(0,n.iD)("button",{key:2,onClick:o[11]||(o[11]=o=>t.cut(3))},"修改")):((0,n.wg)(),(0,n.iD)("button",{key:3,onClick:o[12]||(o[12]=o=>t.cut(3))},"确认"))]),(0,n._)("button",{onClick:o[13]||(o[13]=o=>t.deleteBook())},"注销该书"),(0,n._)("button",{id:"save",onClick:o[14]||(o[14]=o=>t.updata())},"保存所有修改并上传")])])):((0,n.wg)(),(0,n.iD)("h1",mt,"你没有任何的书籍"))}var vt={name:"Amend",setup(){let t=(0,n.f3)("reload");J()({method:"post",url:"http://127.0.0.1:5055/getMyBook",data:{user:localStorage.getItem("userName")}}).then((t=>{J()({method:"post",url:"http://127.0.0.1:5055/getbooks",data:{myBooks:t.data}}).then((t=>{if("null"==t.data[0].Name)return o.bookName=t.data[0].Name,o.myBooks=t.data;o.bookName=t.data[0].Name,o.myBooks=t.data,o.Book=t.data[0],o.on=!0}))}));let o=(0,d.qj)({myBooks:[],bookName:"",Book:void 0,on:!1,cutInupt:[!0,!0,!0,!0,!0,!0],amend(t){this.Book=t},cut(t){this.cutInupt[t]=!this.cutInupt[t]},updata(){J()({method:"post",url:"http://127.0.0.1:5055/setBook",data:{book:o.Book}}).then((t=>{alert("修改完毕")}))},deleteBook(){confirm("警告!\n删除后无法复原 是否还要删除")&&J()({method:"post",url:"http://127.0.0.1:5055/deleteBook",data:{Id:this.Book.Id}}).then((o=>{alert("删除完毕"),t()}))}});return{...(0,d.BK)(o)}}};const yt=(0,V.Z)(vt,[["render",ht],["__scopeId","data-v-4fdfa27f"]]);var wt=yt,Bt={name:"myBook",components:{upBook:A,upChapter:P,Amend:wt},setup(){let t=(0,d.iH)(1);return{switchover:t}}};const bt=(0,V.Z)(Bt,[["render",i],["__scopeId","data-v-755d9240"]]);var Ct=bt}}]);
//# sourceMappingURL=111.5b94e259.js.map